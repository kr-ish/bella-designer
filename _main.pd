#N canvas 155 99 1285 643 12;
#X declare -path lib;
#N canvas 713 152 890 640 works 0;
#N canvas 739 52 716 944 design 0;
#X obj 108 646 expr $f1*$f4+$f2*$f5+$f3*$f6;
#X obj 166 806 list append;
#X obj 112 771 list;
#X obj 80 697 b;
#X obj 74 825 list;
#X obj 113 681 t b f f f;
#X obj 263 807 pack 0 0 0;
#X obj 134 707 ftom;
#X obj 134 731 - 60;
#X obj 75 891 s bell-params;
#X obj 74 853 list split 48;
#X obj 366 97 f 60;
#X floatatom 413 99 5 0 0 0 - - - 0;
#X obj 360 604 t f b;
#X obj 358 635 pack;
#X obj 411 632 random 10;
#X obj 335 99 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 175 736 expr 90-$f1/1000;
#X obj 318 738 expr 99-($f1/200)*($f2/10);
#X obj 191 108 mtof;
#X obj 155 108 mtof;
#X obj 122 107 mtof;
#X obj 363 56 t b l;
#X obj 366 127 t b f;
#X obj 308 159 f;
#X obj 351 152 + 1;
#X obj 359 176 mod 4;
#X obj 352 213 pack;
#X msg 396 218 \; bell-note-\$1 \$2 100 100;
#X obj 361 27 r bell-chord;
#X text 222 6 f1 \, f2 \, f3 \, prob \, seed (if nonzero);
#X obj 154 75 unpack 0 0 0 0 0;
#X msg 411 595 seed \$1;
#X obj 435 522 + 1;
#X msg 434 550 seed \$1;
#X obj 94 170 f 20;
#X obj 384 486 sel 0;
#X text 233 759 expressions for init amplitudes and damping;
#X text 193 890 output a list of (freq \, amp \, damp) triples;
#X obj 110 615 three-f;
#X obj 42 76 t b b b f;
#X obj 551 45 setctl dens2;
#X obj 548 67 setctl dens3;
#X obj 417 344 r dens2;
#X obj 488 343 r dens3;
#X floatatom 602 358 3 0 100 0 dens2 dens2-set dens2 0;
#X floatatom 603 376 3 0 100 0 dens3 dens3-set dens3 0;
#X text 438 308 not implemented;
#X connect 0 0 5 0;
#X connect 1 0 2 1;
#X connect 1 0 4 1;
#X connect 2 0 1 0;
#X connect 3 0 2 1;
#X connect 4 0 10 0;
#X connect 5 0 2 0;
#X connect 5 1 7 0;
#X connect 5 2 17 0;
#X connect 5 3 13 0;
#X connect 6 0 1 1;
#X connect 7 0 8 0;
#X connect 8 0 6 0;
#X connect 10 0 9 0;
#X connect 10 2 9 0;
#X connect 11 0 23 0;
#X connect 12 0 11 1;
#X connect 13 0 14 0;
#X connect 13 1 15 0;
#X connect 14 0 18 0;
#X connect 15 0 14 1;
#X connect 16 0 11 0;
#X connect 17 0 6 1;
#X connect 18 0 6 2;
#X connect 19 0 0 5;
#X connect 20 0 0 4;
#X connect 21 0 0 3;
#X connect 22 0 11 0;
#X connect 22 1 31 0;
#X connect 23 0 24 0;
#X connect 23 1 27 1;
#X connect 24 0 25 0;
#X connect 25 0 26 0;
#X connect 25 0 27 0;
#X connect 26 0 24 1;
#X connect 27 0 28 0;
#X connect 29 0 22 0;
#X connect 31 0 40 0;
#X connect 31 1 20 0;
#X connect 31 2 19 0;
#X connect 31 3 39 1;
#X connect 31 4 36 0;
#X connect 32 0 15 0;
#X connect 33 0 34 0;
#X connect 34 0 39 4;
#X connect 35 0 39 0;
#X connect 36 1 33 0;
#X connect 36 1 32 0;
#X connect 39 0 0 0;
#X connect 40 0 4 0;
#X connect 40 1 35 0;
#X connect 40 2 3 0;
#X connect 40 3 21 0;
#X connect 43 0 39 2;
#X connect 44 0 39 3;
#X restore 40 42 pd design;
#X obj 42 80 bell 1;
#X obj 397 109 r bell-params;
#X obj 441 133 s bell-clear-params;
#X obj 397 158 s bell-do-params;
#X obj 397 132 t l b;
#X msg 401 209 \; bell-note-1 60 100 20;
#N canvas 430 558 535 284 pitch-shift-del 0;
#X obj 77 36 inlet~;
#X obj 67 207 outlet~;
#N canvas 370 320 450 300 delwrite 0;
#X obj 68 99 outlet~;
#X obj 67 28 inlet~;
#X obj 83 64 delwrite~ psdel 5000;
#X connect 1 0 0 0;
#X connect 1 0 2 0;
#X restore 78 80 pd delwrite;
#X obj 68 175 pshift 1;
#X obj 142 207 outlet~;
#X obj 245 40 loadbang;
#X msg 247 64 \; hwind 10;
#X obj 143 175 pshift 2;
#X obj 326 63 r pshift-preset;
#X obj 335 88 loadbang;
#X msg 326 119 \; hamp1 45 \; hfre1 -8 \; hamp2 45 \; hfre2 11;
#X obj 439 64 r pshift-off;
#X msg 439 120 \; hamp1 0 \; hfre1 0 \; hamp2 0 \; hfre2 0;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 7 0;
#X connect 3 0 1 0;
#X connect 5 0 6 0;
#X connect 7 0 4 0;
#X connect 8 0 10 0;
#X connect 9 0 10 0;
#X connect 11 0 12 0;
#X restore 117 253 pd pitch-shift-del;
#X obj 698 600 declare -path lib;
#X obj 69 186 catch~ sum;
#X obj 72 363 outlet~;
#X obj 239 278 outlet~;
#X obj 659 537 setctl hamp1;
#X obj 659 557 setctl hamp2;
#X obj 763 537 setctl hfre1;
#X obj 763 557 setctl hfre2;
#X obj 339 539 unpack 0 0 0 0 0;
#X obj 403 437 r bell-chord;
#X obj 566 516 f;
#X obj 580 487 r auto;
#X obj 533 517 f;
#X obj 532 540 s auto;
#X obj 401 466 t b l b b;
#X msg 476 515 0;
#X obj 476 540 s auto;
#X obj 340 591 s pit1;
#X obj 658 482 setctl pit1;
#X obj 660 508 setctl pit2;
#X obj 756 452 setctl pit3;
#X obj 756 480 setctl prob;
#X obj 755 507 setctl seed;
#X obj 504 591 s prob;
#X obj 558 591 s seed;
#X obj 77 446 r pit1;
#X obj 241 446 r prob;
#X obj 297 446 r seed;
#X obj 21 521 spigot;
#X obj 91 549 f;
#X obj 19 577 r trigger;
#X obj 123 550 pack 0 0 0 0 0;
#X obj 77 470 t b f;
#X obj 131 470 t b f;
#X obj 186 470 t b f;
#X obj 241 470 t b f;
#X obj 297 470 t b f;
#X obj 122 575 s bell-chord;
#X obj 16 446 r auto;
#X obj 658 453 setctl auto;
#X obj 131 446 r pit2;
#X obj 186 446 r pit3;
#X obj 395 591 s pit2;
#X obj 449 591 s pit3;
#X obj 339 513 pack 0 0 0 0 0;
#X obj 654 425 setctl hear-pitches;
#X obj 180 37 testosc pit1;
#X obj 199 187 catch~ testosc;
#X obj 163 114 r hear-pitches;
#X obj 163 138 pack 0 20;
#X obj 163 162 line~;
#X obj 163 187 *~;
#X obj 69 252 +~;
#X obj 41 102 bell 2;
#X obj 40 126 bell 3;
#X obj 40 147 bell 4;
#X obj 179 60 testosc pit2;
#X obj 179 84 testosc pit3;
#N canvas 139 291 450 300 just-intervals 0;
#X obj 125 110 / 4;
#X obj 125 134 ftom;
#X floatatom 125 158 5 0 0 0 - - - 0;
#X obj 125 86 * 11;
#X obj 125 61 mtof;
#X floatatom 124 37 5 0 0 0 - - - 0;
#X obj 80 114 / 4;
#X obj 80 138 ftom;
#X floatatom 80 162 5 0 0 0 - - - 0;
#X obj 173 112 / 4;
#X obj 173 136 ftom;
#X floatatom 173 160 5 0 0 0 - - - 0;
#X obj 80 90 * 7;
#X obj 173 89 * 13;
#X text 58 218 working patch to get MIDI values for just intervals
;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 3 0 0 0;
#X connect 4 0 3 0;
#X connect 4 0 12 0;
#X connect 4 0 13 0;
#X connect 5 0 4 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 12 0 6 0;
#X connect 13 0 9 0;
#X restore 372 46 pd just-intervals;
#X obj 72 337 +~;
#X obj 283 307 env~ 8192;
#X obj 283 331 moses 1;
#X obj 329 354 - 88;
#X obj 284 386 s vu-out1;
#X msg 283 355 -100;
#X text 39 18 guts here:;
#X connect 2 0 5 0;
#X connect 5 0 4 0;
#X connect 5 1 3 0;
#X connect 7 0 67 1;
#X connect 7 1 11 0;
#X connect 9 0 7 0;
#X connect 9 0 60 0;
#X connect 16 0 25 0;
#X connect 16 1 50 0;
#X connect 16 2 51 0;
#X connect 16 3 31 0;
#X connect 16 4 32 0;
#X connect 17 0 22 0;
#X connect 18 0 20 1;
#X connect 19 0 18 1;
#X connect 20 0 21 0;
#X connect 22 0 20 0;
#X connect 22 1 52 0;
#X connect 22 2 23 0;
#X connect 22 3 18 0;
#X connect 23 0 24 0;
#X connect 23 0 52 4;
#X connect 33 0 40 0;
#X connect 34 0 43 0;
#X connect 35 0 44 0;
#X connect 36 0 37 0;
#X connect 37 0 39 0;
#X connect 38 0 37 0;
#X connect 39 0 45 0;
#X connect 40 0 36 0;
#X connect 40 1 37 1;
#X connect 41 0 36 0;
#X connect 41 1 39 1;
#X connect 42 0 36 0;
#X connect 42 1 39 2;
#X connect 43 0 36 0;
#X connect 43 1 39 3;
#X connect 44 0 36 0;
#X connect 44 1 39 4;
#X connect 46 0 36 1;
#X connect 48 0 41 0;
#X connect 49 0 42 0;
#X connect 52 0 16 0;
#X connect 55 0 59 1;
#X connect 56 0 57 0;
#X connect 57 0 58 0;
#X connect 58 0 59 0;
#X connect 59 0 60 1;
#X connect 60 0 11 0;
#X connect 60 0 67 0;
#X connect 67 0 10 0;
#X connect 67 0 68 0;
#X connect 68 0 69 0;
#X connect 69 0 72 0;
#X connect 69 1 70 0;
#X connect 70 0 71 0;
#X connect 72 0 71 0;
#X restore 380 59 pd works;
#X floatatom 66 53 5 0 0 0 - pit1-set pit1 0;
#X obj 77 181 tgl 15 0 auto auto-set empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X text 110 52 pit1;
#X floatatom 66 74 5 0 0 0 - pit2-set pit2 0;
#X text 111 75 pit2;
#X floatatom 66 95 5 0 0 0 - pit3-set pit3 0;
#X text 111 97 pit3;
#X floatatom 66 116 5 3 100 0 - prob-set prob 0;
#X text 111 118 prob;
#X floatatom 66 137 5 0 999 0 - seed-set seed 0;
#X text 112 139 seed;
#X text 88 157 trigger;
#X obj 66 158 bng 15 250 50 0 trigger empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X text 98 179 (auto);
#X text 392 38 -- OUTPUT --;
#X text 60 8 BELL SPECTRUM DESIGNER -- see notes.html for explanation
;
#X obj 477 68 vu 12 80 vu-out1 empty -1 -8 0 10 #404040 #000000 0 0
;
#X obj 380 96 output80~;
#X obj 600 42 loadbang;
#X obj 600 104 s bela_setTrill;
#X msg 600 76 new myhex 1 HEX;
#X obj 594 146 r bela_trillCreated;
#X obj 594 175 print bela_trillCreated;
#X obj 598 350 list;
#X obj 598 310 metro 200;
#X obj 598 243 loadbang;
#X obj 693 248 r bela_trill;
#X text 786 247 This receives the reading from the Trill sensor.;
#X text 827 269 Which will be prepended with the sensor_id;
#X obj 748 391 print hexReadings;
#X text 874 392 [<num_touches> <x> <y> <size>];
#X obj 691 314 route myhex;
#X obj 598 264 delay 100;
#X text 593 12 Bela;
#X obj 600 473 unpack f f f f, f 34;
#X obj 680 539 s hex1;
#X obj 755 534 s hex2;
#X obj 830 538 s hex3;
#X obj 126 326 r hex1;
#X obj 179 326 r hex2;
#X obj 246 326 r hex3;
#X obj 96 453 s bell-chord;
#X obj 209 447 print scaled hexReadings;
#X obj 135 378 pack f f f 50;
#N canvas 419 275 450 300 scale3 0;
#X obj 15 142 outlet;
#X obj 90 59 unpack f f f f f, f 47;
#X obj 90 12 loadbang;
#X obj 15 82 expr if ((($f1-$f2) / ($f3-$f2) == 0) \, $f4 \, if ((($f1-$f2)
/ ($f3-$f2) > 0) \, $f4 + ($f5-$f4) * pow(($f1-$f2) / ($f3-$f2) \,
$f6) \, $f4 + ($f5-$f4) * -1 * pow((-1*$f1+$f2) / ($f3-$f2) \, $f6)))
;
#X obj 15 57 inlet;
#X obj 90 33 list 0 1 0 100 0.5;
#X connect 1 0 3 1;
#X connect 1 1 3 2;
#X connect 1 2 3 3;
#X connect 1 3 3 4;
#X connect 1 4 3 5;
#X connect 2 0 5 0;
#X connect 3 0 0 0;
#X connect 4 0 3 0;
#X connect 5 0 1 0;
#X restore 993 501 pd scale3;
#N canvas 419 275 450 300 scale1 1;
#X obj 15 142 outlet;
#X obj 90 59 unpack f f f f f, f 47;
#X obj 90 12 loadbang;
#X obj 15 82 expr if ((($f1-$f2) / ($f3-$f2) == 0) \, $f4 \, if ((($f1-$f2)
/ ($f3-$f2) > 0) \, $f4 + ($f5-$f4) * pow(($f1-$f2) / ($f3-$f2) \,
$f6) \, $f4 + ($f5-$f4) * -1 * pow((-1*$f1+$f2) / ($f3-$f2) \, $f6)))
;
#X obj 15 57 inlet;
#X obj 90 33 list 0 1 0 100 0.5;
#X connect 1 0 3 1;
#X connect 1 1 3 2;
#X connect 1 2 3 3;
#X connect 1 3 3 4;
#X connect 1 4 3 5;
#X connect 2 0 5 0;
#X connect 3 0 0 0;
#X connect 4 0 3 0;
#X connect 5 0 1 0;
#X restore 831 512 pd scale1;
#N canvas 131 166 450 300 scale1 1;
#X obj 15 142 outlet;
#X obj 90 59 unpack f f f f f, f 47;
#X obj 90 12 loadbang;
#X obj 15 82 expr if ((($f1-$f2) / ($f3-$f2) == 0) \, $f4 \, if ((($f1-$f2)
/ ($f3-$f2) > 0) \, $f4 + ($f5-$f4) * pow(($f1-$f2) / ($f3-$f2) \,
$f6) \, $f4 + ($f5-$f4) * -1 * pow((-1*$f1+$f2) / ($f3-$f2) \, $f6)))
;
#X obj 15 57 inlet;
#X obj 90 33 list 0 1 70 100 1.5;
#X connect 1 0 3 1;
#X connect 1 1 3 2;
#X connect 1 2 3 3;
#X connect 1 3 3 4;
#X connect 1 4 3 5;
#X connect 2 0 5 0;
#X connect 3 0 0 0;
#X connect 4 0 3 0;
#X connect 5 0 1 0;
#X restore 755 509 pd scale1;
#N canvas 131 166 450 300 scale1 0;
#X obj 15 142 outlet;
#X obj 90 59 unpack f f f f f, f 47;
#X obj 90 12 loadbang;
#X obj 15 82 expr if ((($f1-$f2) / ($f3-$f2) == 0) \, $f4 \, if ((($f1-$f2)
/ ($f3-$f2) > 0) \, $f4 + ($f5-$f4) * pow(($f1-$f2) / ($f3-$f2) \,
$f6) \, $f4 + ($f5-$f4) * -1 * pow((-1*$f1+$f2) / ($f3-$f2) \, $f6)))
;
#X obj 90 33 list 0 1 50 100 1;
#X obj 15 57 inlet;
#X connect 1 0 3 1;
#X connect 1 1 3 2;
#X connect 1 2 3 3;
#X connect 1 3 3 4;
#X connect 1 4 3 5;
#X connect 2 0 4 0;
#X connect 3 0 0 0;
#X connect 4 0 1 0;
#X connect 5 0 3 0;
#X restore 679 511 pd scale1;
#X connect 0 0 18 0;
#X connect 0 1 18 1;
#X connect 19 0 21 0;
#X connect 21 0 20 0;
#X connect 22 0 23 0;
#X connect 24 0 35 0;
#X connect 25 0 24 0;
#X connect 26 0 33 0;
#X connect 27 0 32 0;
#X connect 32 0 24 1;
#X connect 33 0 25 0;
#X connect 35 1 48 0;
#X connect 35 2 47 0;
#X connect 35 3 46 0;
#X connect 39 0 44 0;
#X connect 40 0 44 1;
#X connect 41 0 44 2;
#X connect 44 0 43 0;
#X connect 44 0 42 0;
#X connect 46 0 38 0;
#X connect 47 0 37 0;
#X connect 48 0 36 0;
